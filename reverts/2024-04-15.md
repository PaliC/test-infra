# Week of 2024-04-15 to 2024-04-22 (24)

### GHFirst (3)

- [Revert "Capture triton kernel in execution trace (#124140)"](https://github.com/pytorch/pytorch/commit/f87c788a3476110d184ffddcda873ae216f3e9aa)
  - Diff reverted internally ([comment](https://github.com/pytorch/pytorch/pull/124140#issuecomment-2067137104))
- [Revert "[Environment Variable][1/N] Use thread-safe env variable API in c10 (#119449)"](https://github.com/pytorch/pytorch/commit/f5049de24298a229fc133f8ed272e558ca81c73a)
  - your using TORCH_INTERNAL_ASSERT incorrectly ([comment](https://github.com/pytorch/pytorch/pull/119449#issuecomment-2062696010))
- [Revert "make sure dynamo doesn't inline DTensor __new__ or __torch_dispatch__ (#123347)"](https://github.com/pytorch/pytorch/commit/9d88339b535f57cd0e2926c9ac4c2542e4490aac)
  - Diff reverted internally ([comment](https://github.com/pytorch/pytorch/pull/123347#issuecomment-2059994989))

### Ignored Signal (5)

- [Revert "[Profiler] Unify the device(CUDA, XPU, PrivateUse1) in torch profiler post processing (#123247)"](https://github.com/pytorch/pytorch/commit/520bc1080e3cdf432257178756553f5f34064771)
  - Broken trunk ([comment](https://github.com/pytorch/pytorch/pull/123247#issuecomment-2066152611))
- [Revert "[Environment Variable][1/N] Use thread-safe env variable API in c10 (#119449)"](https://github.com/pytorch/pytorch/commit/61bc188f42458786bb7e24a5bb9f5b6ddf05adb8)
  - Broke gcc9 builds ([comment](https://github.com/pytorch/pytorch/pull/119449#issuecomment-2064936414))
- [Revert "[Profiler][PrivateUse1] Profiler support PrivateUse1 key (#120556)"](https://github.com/pytorch/pytorch/commit/36f6928a37dd8de80841000485f3ac51c1bee7af)
  - Breaks GPU Chrome trace UI ([comment](https://github.com/pytorch/pytorch/pull/120556#issuecomment-2061578951))
- [Revert "Re-land precompile triton templates (#124030)"](https://github.com/pytorch/pytorch/commit/3f89f565bb17bcb70cb6938540af0cd154c8344a)
  - Broken trunk ([comment](https://github.com/pytorch/pytorch/pull/124030#issuecomment-2061044960))
- [Revert "Dont precompile already seen keys, limit epilogue choices (#122642)"](https://github.com/pytorch/pytorch/commit/77ad630f5d404858dd19d6e7f79ab3573dbb7c0a)
  - Broken trunk ([comment](https://github.com/pytorch/pytorch/pull/124030#issuecomment-2061044960))

### Landrace (2)

- [Revert "[DeviceMesh][Test] Add 3d unit test for `get_local_rank()` (#124142)"](https://github.com/pytorch/pytorch/commit/944d0466451be755f226c379201220d989f45d7e)
  - Broke lint ([comment](https://github.com/pytorch/pytorch/pull/124142#issuecomment-2062587289))
- [Revert "Enable UFMT on all of `test/distributed` (#123539)"](https://github.com/pytorch/pytorch/commit/52be63eb2cb3947c00a8c4506eb961603da7d564)
  - Broken trunk ([comment](https://github.com/pytorch/pytorch/pull/123539#issuecomment-2058329471))

### Not through pytorchbot (1)

- [Back out "Refresh OpOverloadPacket if a new OpOverload gets added (#123578)" (#124324)](https://github.com/pytorch/pytorch/commit/27daa110c8629398ebe6d6c3ccc1d9d692eb9872)

### No Signal (10)

- [Revert "Build device generic torch.Stream and torch.Event based on c10::Stream/Event (#123611)"](https://github.com/pytorch/pytorch/commit/0feab7d6c3c7da284a86d6a0c7d0f0c84cff577e)
  - This broke ROCm. see test_overrides.py ([comment](https://github.com/pytorch/pytorch/pull/123611#issuecomment-2067363780))
- [Revert "torch.mtia module for MTIA device backend (#123612)"](https://github.com/pytorch/pytorch/commit/929242a15c71ff0a900f115f0915aa5c5b1b9279)
  - This broke ROCm. see test_overrides.py ([comment](https://github.com/pytorch/pytorch/pull/123611#issuecomment-2067363780))
- [Revert "Add test_cpp_extensions tests for stream_and_event and mita_backend (#123614)"](https://github.com/pytorch/pytorch/commit/52da03edeb5f942869758bb529831c04a69b0606)
  - This broke ROCm. see test_overrides.py ([comment](https://github.com/pytorch/pytorch/pull/123611#issuecomment-2067363780))
- [Revert "[NJT] Inline through torch.nested.nested_tensor_from_jagged instead of graph break (#124343)"](https://github.com/pytorch/pytorch/commit/4a0900d04b94831d0bd2b8c0a3051f0be1f5f202)
  - Broken trunk ([comment](https://github.com/pytorch/pytorch/pull/124343#issuecomment-2064937192))
- [Revert "Re-land precompile triton templates (#124030)"](https://github.com/pytorch/pytorch/commit/2b82345e487a7f1a6ba3a663201e0e0235d87b23)
  - Broken trunk ([comment](https://github.com/pytorch/pytorch/pull/124030#issuecomment-2063191117))
- [Revert "[Dynamo] Check for __bool__ attribute before accessing it (#120943)"](https://github.com/pytorch/pytorch/commit/6e86a40694f03c66680201c01c13347eff38a951)
  - Broken trunk ([comment](https://github.com/pytorch/pytorch/pull/120943#issuecomment-2063098295))
- [Revert "Add swap_tensors path to nn parametrizations (#124130)"](https://github.com/pytorch/pytorch/commit/8ff85b42f9c6a2bf3b7ae597a0abb9fd56204a98)
  - Broken trunk ([comment](https://github.com/pytorch/pytorch/pull/124130#issuecomment-2063074856))
- [Revert "[sparse] Add fast semi-structured spasification kernels (#122350)"](https://github.com/pytorch/pytorch/commit/2dc15b684980c5b7f964a797dbee7915399a089c)
  - Broken trunk ([comment](https://github.com/pytorch/pytorch/pull/122350#issuecomment-2061070350))
- [Revert "[reland] `_foreach_copy` with different src/dst dtypes (#123844)"](https://github.com/pytorch/pytorch/commit/1f89bf4188e35e8596252d8b75c7672394073b4a)
  - Perhaps it enabled it for different dtype, but broke for the same ([comment](https://github.com/pytorch/pytorch/pull/123844#issuecomment-2059861767))
- [Revert "[dynamo] Turn on CPP guard manager (#123547)"](https://github.com/pytorch/pytorch/commit/530bf391cc598228b0cdb8e4204f5b6f4257a3a9)
  - Broken trunk ([comment](https://github.com/pytorch/pytorch/pull/123547#issuecomment-2058337419))

### Weird (3)

- [Revert "Migrate linux-focal-cuda11_8-py3_10-gcc9-build to ARC (#123721)"](https://github.com/pytorch/pytorch/commit/e408d9ca250dc7e808c8f9b396e6eb671dfb5736)
  - ARC is too flaky ([comment](https://github.com/pytorch/pytorch/pull/123721#issuecomment-2065750954))
- [Revert "Migrate linux-focal-cuda12_1-py3_10-gcc9-build to ARC (#123722)"](https://github.com/pytorch/pytorch/commit/96a067b190be82a0029f7bf2fa891eed15f2d5fb)
  - ARC is too flaky ([comment](https://github.com/pytorch/pytorch/pull/123722#issuecomment-2065749522))
- [Revert "Skip workspace permission change for ROCm CI (#123816)"](https://github.com/pytorch/pytorch/commit/9385ef2a5dbd62cb877e863c91ff29a43c340456)
  - Broken trunk ([comment](https://github.com/pytorch/pytorch/pull/123816#issuecomment-2063949316))
