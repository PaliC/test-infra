# Week of 2023-11-06 to 2023-11-13 (31)

### GHFirst (16)

- [Revert "[AOTI] Implement support for user defined kernels that use triton.autotune (#113229)"](https://github.com/pytorch/pytorch/commit/2cd8c0565ce6683a0f5eac2ad8b8dbb924326744)
  - breaking test_aot_inductor.py tests though a forward fix is coming ([comment](https://github.com/pytorch/pytorch/pull/113229#issuecomment-1806159396))
- [Revert "[BE] [cuDNN] Always build assuming cuDNN >= 8.0 (#95722)"](https://github.com/pytorch/pytorch/commit/3c9a59cb8dd8f966386de7bd4bd0b284819e3654)
  - is breaking a bunch of internal pytorch users ([comment](https://github.com/pytorch/pytorch/pull/95722#issuecomment-1806131675))
- [Revert "[pytree] register pytree node type in both C++ pytree and Python pytree (#112111)"](https://github.com/pytorch/pytorch/commit/2a271a3efa9acf396cb89afb16c766a872529c4f)
  - _private_register_pytree_node now checks for duplicate registering, unfortunately, this breaks composability with torchrec internally :(  ([comment](https://github.com/pytorch/pytorch/pull/112111#issuecomment-1806130993))
- [Revert "[pytree] reorganize submodule structure for C++ and Python pytree (#112278)"](https://github.com/pytorch/pytorch/commit/23e0923c74f9cbc6f165f9cda3beb52a82029c83)
  - Reverting this pr as the one under it in the stack is causing regressions in torchrec ([comment](https://github.com/pytorch/pytorch/pull/112278#issuecomment-1806044435))
- [Revert "[dynamo] Refactor test cross importing (#113242)"](https://github.com/pytorch/pytorch/commit/59592389fc0cded415e5a36d5a677b11dae9be16)
  - this diff appears to be causing inductor failures internally ([comment](https://github.com/pytorch/pytorch/pull/113242#issuecomment-1805132719))
- [Revert "[inductor] Move things into torch/testing/_internal/inductor_utils.py (#113275)"](https://github.com/pytorch/pytorch/commit/68bf0f1e7d86fef72ca4d0200b3c3cc6d83991e9)
  - the diff this is stacked on top of appears to be causing inductor failures internally ([comment](https://github.com/pytorch/pytorch/pull/113275#issuecomment-1805131017))
- [Revert "[pytree] align function signature between C++ and Python pytree (#112482)"](https://github.com/pytorch/pytorch/commit/66150b29e3a535742e4df538a74fa50ff8f90c95)
  - changing _register_pytree_node's signature is bc breaking, please revert the signature and reland ([comment](https://github.com/pytorch/pytorch/pull/112482#issuecomment-1804909926))
- [Revert "[pytree] register pytree node type in both C++ pytree and Python pytree (#112111)"](https://github.com/pytorch/pytorch/commit/9a909891212a73cdeed9ef379ac6d0fbe2b796db)
  - in the bottom diff in the stack changing _register_pytree_node's signature is bc breaking, please revert the signature and reland ([comment](https://github.com/pytorch/pytorch/pull/112111#issuecomment-1804892924))
- [Revert "[pytree] reorganize submodule structure for C++ and Python pytree (#112278)"](https://github.com/pytorch/pytorch/commit/bf452dcde66b920e09414717f901e4307375f709)
  - in the bottom diff in the stack changing _register_pytree_node's signature is bc breaking, please revert the signature and reland ([comment](https://github.com/pytorch/pytorch/pull/112278#issuecomment-1804870560))
- [Revert "Grandfather in built-in TorchScript ops to being pt2_compliant (#113061)"](https://github.com/pytorch/pytorch/commit/d98182e34e1570848df18fa7b8aa58ec0ee47fbf)
  - breaking internal tests - contacted author with errors ([comment](https://github.com/pytorch/pytorch/pull/113061#issuecomment-1802528592))
- [Revert "Grandfather in some more pytorch ops to be pt2_compliant (#113050)"](https://github.com/pytorch/pytorch/commit/e49b9492c618ac0880be06b3bdca4502bb3861e2)
  - breaking internal tests - contacted author with errors ([comment](https://github.com/pytorch/pytorch/pull/113050#issuecomment-1802524046))
- [Revert "Add support for `torch.Generator` type in TorchScript (#110413)"](https://github.com/pytorch/pytorch/commit/9a28a7b49842f8caa647c225be57f888ea4bb4af)
  - breaking internal builds ([comment](https://github.com/pytorch/pytorch/pull/110413#issuecomment-1799003164))
- [Revert "[HigherOrderOp] remove _deprecated_global_ns (#112757)"](https://github.com/pytorch/pytorch/commit/77d5f0379ea8255a5c7f7c56bbadc3f3cc1edbd8)
  - breaking a bunch of executorch tests ([comment](https://github.com/pytorch/pytorch/pull/112757#issuecomment-1795503740))
- [Revert "Use OpOverload instead of OpOverloadPacket for size/stride/etc slots (#112119)"](https://github.com/pytorch/pytorch/commit/a1d1b73a7c2cf6b9a2edb4170ec268dfd90956bd)
  - still breaking trt tests :( refer to diff ([comment](https://github.com/pytorch/pytorch/pull/112119#issuecomment-1795496395))
- [Revert "[Cmake] Check that gcc-9.4 or newer is used (#112858)"](https://github.com/pytorch/pytorch/commit/679ca510b0fc5d027c69f2946db8785c16cbb244)
  - breaking internal tests (check diff for test page) ([comment](https://github.com/pytorch/pytorch/pull/112858#issuecomment-1795485009))
- [Revert "[aotinductor] Solves a problem where a tensor is returned more than once (#112177)"](https://github.com/pytorch/pytorch/commit/2bc1378d7be563fa9b3050bb0e0fefd6e55a9e81)
  - breaking internal tests (refer to internal diff) ([comment](https://github.com/pytorch/pytorch/pull/112177#issuecomment-1794153272))

### Ignored Signal (1)

- [Revert "Grandfather in c10d_functional ops to pt2_compliant (#113049)"](https://github.com/pytorch/pytorch/commit/1fea599d9a3b4e15f5f3de57807e888f37c916a0)
  - something in the stack broke distributed and inductor, pretty sure its this one ([comment](https://github.com/pytorch/pytorch/pull/113049#issuecomment-1797298969))

### Landrace (1)

- [Revert "[TD] Add heuristic for class level historical correlations (#112162)"](https://github.com/pytorch/pytorch/commit/0fee7a0181c371d52bdac6fa6988ad9eff6721fc)
  - broke lint? probably a landrace ([comment](https://github.com/pytorch/pytorch/pull/112162#issuecomment-1800310012))

### Not through pytorchbot (4)

- [Revert "Revert 107846 and 109695 (#111099)" (#113420)](https://github.com/pytorch/pytorch/commit/c3c4e70b2ca601c66f964a33b61a62769e8dcdfb)
- [Back out "[inductor] scale up num_warps for reductions to lower register pressure (#113039)" (#113400)](https://github.com/pytorch/pytorch/commit/eb1534027f371f5b6942841efc77d56a3921d587)
- [Revert "[dynamo] Graph break on `setattr(Tensor, "data", Tensor)` (#113043)" (#113297)](https://github.com/pytorch/pytorch/commit/2c4be77f024a50825fab0a159094db489a358ac0)
- [Revert "Revert "Use OpOverload instead of OpOverloadPacket for size/sâ€¦ (#113058)](https://github.com/pytorch/pytorch/commit/542fa4a2e7160fa6456c57e666ec7beab933efa0)

### No Signal (6)

- [Revert "[Kineto] Initialize libkineto profilers during torch init process during pybind set-up (#112623)"](https://github.com/pytorch/pytorch/commit/4916a7e94f44daafecd4ed7bec70a7b799a2a28b)
  - This break TestCuda::test_lazy_init on ROCm ([comment](https://github.com/pytorch/pytorch/pull/112623#issuecomment-1806597750))
- [Revert "[BE] Remove stale CUDA version check from cpp_extension.py (#113447)"](https://github.com/pytorch/pytorch/commit/ae2c219de2fd032036aa1d2a04101f1c23fd5bbe)
  - Broke ROCM ([comment](https://github.com/pytorch/pytorch/pull/113447#issuecomment-1806407892))
- [Revert "[dynamo] graph break on setattr `requires_grad` (#113163)"](https://github.com/pytorch/pytorch/commit/94d95a91a253f19e22820912e71dba75361d4e5c)
  - relevant tests are not running for this pr, however, this is fixed after landing https://github.com/pytorch/pytorch/pull/113297/ ([comment](https://github.com/pytorch/pytorch/pull/113163#issuecomment-1802967236))
- [Revert "Replaced deprecated pkg_resources.packaging with packaging module (#113023)"](https://github.com/pytorch/pytorch/commit/aef9e43fe6e9d3dc498dfde0fb3b246f5c2393d2)
  - breaks nightlies ([comment](https://github.com/pytorch/pytorch/pull/113023#issuecomment-1802720774))
- [Revert "Update impl_abstract_pystub to be less boilerplatey (#112851)"](https://github.com/pytorch/pytorch/commit/bc3e2e03cd65db30889bcb57d88d00b72188f238)
  - broke inductor vision_maskrcnn, see above comment ([comment](https://github.com/pytorch/pytorch/pull/112851#issuecomment-1799539354))
- [Revert "Fix default timeouts for python entrypoints (e.g. init_process_group) (#112893)"](https://github.com/pytorch/pytorch/commit/75adb9f37150a670e88c82a2090fe9e40a5602c6)
  - sorry this seems to have broken inductor https://hud.pytorch.org/pytorch/pytorch/commit/f9d47e13813bbefc9f19a6c0430b7122f9d09b91 https://github.com/pytorch/pytorch/actions/runs/6776367936/job/18418174752 ([comment](https://github.com/pytorch/pytorch/pull/112893#issuecomment-1796979811))

### Weird (3)

- [Revert "[ONNX] Fix scalar type promotion between fp16 tensor and fp32 scalar (#113404)"](https://github.com/pytorch/pytorch/commit/3cb6cf1e8aa594268fbb8ca365c77c695d828e76)
  - Sorry for reverting your change, but it is failing in trunk https://hud.pytorch.org/pytorch/pytorch/commit/f2cd68102a56cd0427f25b748bbe3b463d43807b, may be a landrace or flaky of sort ([comment](https://github.com/pytorch/pytorch/pull/113404#issuecomment-1806613497))
- [Revert "Grandfather in some more pytorch ops to be pt2_compliant (#113050)"](https://github.com/pytorch/pytorch/commit/19dbd8aca354119701d1a4f7cfa7b1a8c9fb9709)
  - something in the stack broke distributed and inductor, pretty sure its the c10 one ([comment](https://github.com/pytorch/pytorch/pull/113050#issuecomment-1797279756))
- [Revert "Grandfather in built-in TorchScript ops to being pt2_compliant (#113061)"](https://github.com/pytorch/pytorch/commit/d94d72b39767916ad86fc22f72bd0eb25905d812)
  - something in the stack broke distributed and inductor, pretty sure its the c10 one.  Not sure why so many things were flaky on this PR ([comment](https://github.com/pytorch/pytorch/pull/113061#issuecomment-1797251293))
