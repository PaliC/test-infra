# Week of 2023-05-15 to 2023-05-22 (25)

### GHFirst (17)

- [Revert "  fix missing-prototypes warnings in torch_cpu (Part 4)  (#100849)"](https://github.com/pytorch/pytorch/commit/498c34e8e84d30362bed3081f599810bd7c3afc7)
  - fails internal Meta builds, including fbcode and android, see D46009888: ld.lld: error: undefined symbol: nnc_aten_embedding ([comment](https://github.com/pytorch/pytorch/pull/100849#issuecomment-1555105800))
- [Revert "  fix missing-prototypes warnings in torch_cpu (Part 5) (#101788)"](https://github.com/pytorch/pytorch/commit/e760a968c8a335ab6be4b33c543f0b49a5ef5cc8)
  - depends on #100849 which has to be reverted ([comment](https://github.com/pytorch/pytorch/pull/101788#issuecomment-1555097961))
- [Revert "match sdpa patterns from HF (#100609)"](https://github.com/pytorch/pytorch/commit/b5217d08986faa4ddbeab5d50bed7043e3a2e781)
  - breaks inductor tests, please see D45973031 ([comment](https://github.com/pytorch/pytorch/pull/100609#issuecomment-1553650280))
- [Revert "Implement adding bias vector into structured sparse linear operator (#100881)"](https://github.com/pytorch/pytorch/commit/a76c1af351ace78870b59a9efb167d0ae381e412)
  - breaks internal builds, see D45972633 ([comment](https://github.com/pytorch/pytorch/pull/100881#issuecomment-1553621418))
- [Revert "Add activation functions (ReLU  and SiLU for now) for structured sparse linear operator (#101339)"](https://github.com/pytorch/pytorch/commit/eb9ac9c1566dc969d48b688ba13a9470947a9402)
  - Depends on #100881, which has to be reverted due to internal build breakage. ([comment](https://github.com/pytorch/pytorch/pull/101339#issuecomment-1553618216))
- [Revert "[inductor] Refactor RNG operators (#100064)"](https://github.com/pytorch/pytorch/commit/5f07c589b09c35b613df735923691357169aaca2)
  - breaks inductor tests, see D45936056 ([comment](https://github.com/pytorch/pytorch/pull/100064#issuecomment-1552093728))
- [Revert "match sdpa patterns from HF (#100609)"](https://github.com/pytorch/pytorch/commit/5d3cfda1edc6bc444faa4cc96a0943396cb445a6)
  - Based on #100064, which needs to be reverted due to diff-train issues. ([comment](https://github.com/pytorch/pytorch/pull/100609#issuecomment-1552089472))
- [Revert "match sdpa patterns from HF (#100609)"](https://github.com/pytorch/pytorch/commit/0585944eac4d2fb381ae46aeeba6fcaa01c8fad0)
  - Breaks internal tests, see D45899223 ([comment](https://github.com/pytorch/pytorch/pull/100609#issuecomment-1550349249))
- [Revert "extend serialization for tensor metadata (#99808)"](https://github.com/pytorch/pytorch/commit/1272cd73dabd83aa4b6b9650a7a0a95fa6e10f1c)
  - Breaks internal builds: ld.lld: error: undefined symbol: torch::jit::GetBackendMetaSerialization() ([comment](https://github.com/pytorch/pytorch/pull/99808#issuecomment-1550071656))
- [Revert "[fx] Better replacements finder in subgraph rewriter (#100556)"](https://github.com/pytorch/pytorch/commit/13056ca2295711ef79168c989f039159ed1f4c55)
  - Reverting temporarily to unblock diff train, see D45743510 and #100610 ([comment](https://github.com/pytorch/pytorch/pull/100556#issuecomment-1548934932))
- [Revert "Cleanup custom op library after each custom_op test (#100980)"](https://github.com/pytorch/pytorch/commit/349a2b3871f5ea11a5b8bede16c7d984a6fe80a3)
  - breaking internal builds ([comment](https://github.com/pytorch/pytorch/pull/100980#issuecomment-1548336634))
- [Revert "[custom_op] Change the python type that maps to ListType in schema (#101190)"](https://github.com/pytorch/pytorch/commit/b50595702b2699a91493500cfa7207876d3f4a31)
  - preventing the revert of #100980 ([comment](https://github.com/pytorch/pytorch/pull/101190#issuecomment-1548332644))
- [Revert "[dynamo] Activation checkpointing as higher order op (#101028)"](https://github.com/pytorch/pytorch/commit/d0db7d624d16f31254bb06fb33623c4efe91db58)
  - breaking internal builds ([comment](https://github.com/pytorch/pytorch/pull/101028#issuecomment-1548280970))
- [Revert "[c10d] Bridge c10d and gloo stores. (#100384)"](https://github.com/pytorch/pytorch/commit/13383f45c5a8c469e510a51513b894e5a3ff22e3)
  - breaking internal builds ([comment](https://github.com/pytorch/pytorch/pull/100384#issuecomment-1548279946))
- [Revert "[caffe2/tools/autograd] Fix non-determinism in code gen (#101287)"](https://github.com/pytorch/pytorch/commit/2341bd69e9c2d6c8bda56e8fba1ad906f385c21b)
  - breaking internal builds ([comment](https://github.com/pytorch/pytorch/pull/101287#issuecomment-1548273201))
- [Revert "[fx] change from #users to num_users in graph printout (#101140)"](https://github.com/pytorch/pytorch/commit/66eef3144467b2a562337506533ee2efe740bfda)
  - There are internal changes to this commit that are preventing landing, so I am reverting to unblock the diff train ([comment](https://github.com/pytorch/pytorch/pull/101140#issuecomment-1547989487))
- [Revert "[inductor] fix incorrect strides in copy() decomp, fix hf_LongFormer + hf_BigBird errors (#100115)"](https://github.com/pytorch/pytorch/commit/87f9160b6727ba554520bbd9f8905c7cf3c8654a)
  - breaking internal tests ([comment](https://github.com/pytorch/pytorch/pull/100115#issuecomment-1547417287))

### Ignored Signal (1)

- [Revert "Actually functionalize torch.export (#101433)"](https://github.com/pytorch/pytorch/commit/eac5f2a8e47f1ab1ec5de5eb6c8a024752a9e7bf)
  - causing failures on functorch macOS tests ([comment](https://github.com/pytorch/pytorch/pull/101433#issuecomment-1550111671))

### Not through pytorchbot (2)

- [Revert "[Reland] Add sym_size/stride/numel/storage_offset to native_function.â€¦ (#100749)"](https://github.com/pytorch/pytorch/commit/20cf42de2c4ea44f9f4652e986daa1a5f81ba06e)
- [Revert torch.fx.interpreter error printing change (#101462)](https://github.com/pytorch/pytorch/commit/d198033661bed06a59b1aa5a46fd1a615a3f7dc9)

### No Signal (4)

- [Revert "separate out dynamo .requires_grad and .is_grad_enabled guards (#100570)"](https://github.com/pytorch/pytorch/commit/7f3fed125eecb9f55b1fc1af5bfa1633485764bd)
  - breaking inductor tests along with #101219 ([comment](https://github.com/pytorch/pytorch/pull/100570#issuecomment-1555271267))
- [Revert "fix inference_mode with torch.compile (#101219)"](https://github.com/pytorch/pytorch/commit/083f304d27e7e8789808853cd58d1e0de90eca4c)
  - breaking inductor tests ([comment](https://github.com/pytorch/pytorch/pull/101219#issuecomment-1555104220))
- [Revert "Support map autograd and pytree in/out (#100494)"](https://github.com/pytorch/pytorch/commit/e69198b04335c2c0c40ee9db1c804e36d459eac7)
  - breaking tests on trunk, please check hud.pytorch.org for the broken tests ([comment](https://github.com/pytorch/pytorch/pull/100494#issuecomment-1550454835))
- [Revert "implement a function to convert a storage to copy-on-write (#100819)"](https://github.com/pytorch/pytorch/commit/cca31f179719e15a57220246795f207a71557537)
  - added tests are breaking internal builds ([comment](https://github.com/pytorch/pytorch/pull/100819#issuecomment-1547929531))

### Weird (1)

- [Revert "[CustomOp] Add Dispatcher error callback (#101015)"](https://github.com/pytorch/pytorch/commit/7912b347898a8ae6fe9d60ce2d52f732ede588e9)
  - Revert this as the earlier commits in the stack have been reverted ([comment](https://github.com/pytorch/pytorch/pull/101015#issuecomment-1548476583))
