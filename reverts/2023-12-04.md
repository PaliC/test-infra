# Week of 2023-12-04 to 2023-12-11 (24)

### GHFirst (12)

- [Revert "[HigherOrderOp] make MapHigherOrder create map_impl call_function node instead of map (#115205)"](https://github.com/pytorch/pytorch/commit/6c1e75e6467602ad017c6d14532ee572fb22508a)
  - ghfirst broke internal tests ([comment](https://github.com/pytorch/pytorch/pull/115205#issuecomment-1848995376))
- [Revert "[HigherOrderOp] Remove additional get item calls in MapHigherOrder. (#115207)"](https://github.com/pytorch/pytorch/commit/08d63a75a479afd956015273178e85ce0097cf70)
  - ghfirst broke internal tests ([comment](https://github.com/pytorch/pytorch/pull/115207#issuecomment-1848991919))
- [Revert "[export] Fix graph output mismatch issue with constant outputs. (#115280)"](https://github.com/pytorch/pytorch/commit/3e47e3f44188c48f47b84cc64da503508f5a3c59)
  - ghfirst issue when importing, will reland this PR ([comment](https://github.com/pytorch/pytorch/pull/115280#issuecomment-1847903624))
- [Revert "[export] Dont skip output caching for now. (#115374)"](https://github.com/pytorch/pytorch/commit/3dab46fe1978f87be3dddd88fd8c1e0ee4342253)
  - ghfirst issue when importing, will reland this PR ([comment](https://github.com/pytorch/pytorch/pull/115374#issuecomment-1847899901))
- [Revert "[export] Add math.* ops to pass base (#115271)"](https://github.com/pytorch/pytorch/commit/af925a56a195cc095c589af687513cdc22caf33a)
  - ghfirst issue when importing, will reland this PR ([comment](https://github.com/pytorch/pytorch/pull/115271#issuecomment-1847852211))
- [Revert "[export] Remove runtime assertion pass (#115196)"](https://github.com/pytorch/pytorch/commit/4186932baca2cb03c436bb9ad146d111cd0070fc)
  - Broke internal test ([comment](https://github.com/pytorch/pytorch/pull/115196#issuecomment-1847778344))
- [Revert "Assert that output could only be the last node of the FX graph (#115179)"](https://github.com/pytorch/pytorch/commit/684ce1b21d9942708ea4069009db8134f14ec6e1)
  - Diff reverted internally ([comment](https://github.com/pytorch/pytorch/pull/115179#issuecomment-1845776365))
- [Revert "[Reland2] Update NVTX to NVTX3 (#109843)"](https://github.com/pytorch/pytorch/commit/ee96399bb475c1c33d29c2549b78aa805f14688e)
  - Diff broke internal builds and tests ([comment](https://github.com/pytorch/pytorch/pull/109843#issuecomment-1841105398))
- [Revert "Modify pointwise cat heuristic to only apply when inputs are all pointwise and outputs are all pointwise (#114520)"](https://github.com/pytorch/pytorch/commit/0ee1e469cb28c43d63542c03b7efff50b71198a0)
  - Diff broke internal tests ([comment](https://github.com/pytorch/pytorch/pull/114520#issuecomment-1840890210))
- [Revert "Update oneDNN submodule to v3.3.2 (#112700)"](https://github.com/pytorch/pytorch/commit/62df4f34283d7070ed772097d327f66aeb64efee)
  - Diff broke internal tests ([comment](https://github.com/pytorch/pytorch/pull/112700#issuecomment-1839350284))
- [Revert "Assert that output could only be the last node of the FX graph (#114973)"](https://github.com/pytorch/pytorch/commit/8bb3cd192ff9363dd4f5eb98c09645b5e8c534d5)
  - Diff broke internal tests ([comment](https://github.com/pytorch/pytorch/pull/114973#issuecomment-1839290400))
- [Revert "Move class definition of DebugInfoWriter to TraceUtil as well (#114901)"](https://github.com/pytorch/pytorch/commit/f101426790533c62efaf0c6808214800637a1bc6)
  - Diff broke internal tests ([comment](https://github.com/pytorch/pytorch/pull/114901#issuecomment-1838815178))

### Landrace (1)

- [Revert "[Dynamo][6.1/N] Refactor out TorchInGraphFunctionVariable and improve heuristic (#113432)"](https://github.com/pytorch/pytorch/commit/e8e4141773d305fad5927205d507e464f7b7f830)
  - Sorry for reverting your change, but it is failing dynamo tests in trunk https://hud.pytorch.org/pytorch/pytorch/commit/e61d6b42f0f4e4fa5bb816e03fb81e5bbcc9fa06, landrace? ([comment](https://github.com/pytorch/pytorch/pull/113432#issuecomment-1847787981))

### Not through pytorchbot (5)

- [Revert "[export][refactor][2/n] Move tracing logic (#114768)" (#115503)](https://github.com/pytorch/pytorch/commit/24a463c46cbd9d1fbe6b24891ec3febf0a65abb9)
- [Revert "[dynamo] remove unused `OptimizeCtx` field - export (#113901)" (#115401)](https://github.com/pytorch/pytorch/commit/b4ef59f74070ea9e8ee58763ffb4be3372028736)
- [Revert "[dynamo] Guard on `HAS_GRAPH_BREAKS` if graph breaks are present (i.e. cache miss if compiled object requires nopython) (#114073)" (#115384)](https://github.com/pytorch/pytorch/commit/b36fc6790ede52bac201d4660ec48fe3299f71fc)
- [Revert "[export][refactor][3/n] Move unlift to separate file (#114787)" (#115457)](https://github.com/pytorch/pytorch/commit/749f0c90e1256061f568a08336b05881349893d6)
- [Revert "[DeviceMesh] Rename _device_mesh.py to device_mesh.py to prepare for beta (#115099)"](https://github.com/pytorch/pytorch/commit/a827ac71f295ea866be84805b6513353db760a15)

### No Signal (4)

- [Revert "Enable builtin tests for ONNX Export with ExportedProgram models (#114762)"](https://github.com/pytorch/pytorch/commit/4eb5838e184d7f5a795498d32bdde17f0088350f)
  - Sorry for reverting your change but ONNX test is failing from this commit https://hud.pytorch.org/pytorch/pytorch/commit/13d2e3eba79000028291f4739a6e9c937dbe4264 ([comment](https://github.com/pytorch/pytorch/pull/114762#issuecomment-1848831147))
- [Revert "Move ONNX's TorchModelType to pytorch_test_common to fix circ. dep. (#115353)"](https://github.com/pytorch/pytorch/commit/2ee240d14a54b540bfcba2e22fd37cb55103f5b3)
  - Sorry for reverting your change but ONNX test is failing from the commit below in the stack https://hud.pytorch.org/pytorch/pytorch/commit/13d2e3eba79000028291f4739a6e9c937dbe4264 ([comment](https://github.com/pytorch/pytorch/pull/115353#issuecomment-1848830883))
- [Revert "enable cat for cuda bits types (#115044)"](https://github.com/pytorch/pytorch/commit/063423edf5291d180af35ccb5f43ffe3f079acf3)
  - This breaks ROCM ([comment](https://github.com/pytorch/pytorch/pull/115044#issuecomment-1841494814))
- [Revert "Add an SDPA dispatcher for nested tensors with jagged layouts (#114164)"](https://github.com/pytorch/pytorch/commit/5cfda9b7f881c9d0163b451e1d837bc3b88b75c7)
  - Broke ROCM, see https://hud.pytorch.org/pytorch/pytorch/commit/aafa8233a4a1f336014cb122d16941e5b593706c ([comment](https://github.com/pytorch/pytorch/pull/114164#issuecomment-1839798986))

### Weird (2)

- [Revert "[SparseCsr] Remove triton sdpa skip after triton pin update (#109601)"](https://github.com/pytorch/pytorch/commit/d7180161b5b7f00e0e53d92ee8eab15820aaa3de)
  - Sorry for reverting your change, but it is failing in trunk with this error ZeroDivisionError: integer division or modulo by zero ([comment](https://github.com/pytorch/pytorch/pull/109601#issuecomment-1847784383))
- [Revert "[C10D] Use future for flight recorder dump (#115176)"](https://github.com/pytorch/pytorch/commit/ac7d14baad53fa7d63119418f760190f289d8a01)
  - Sorry for reverting your change, but the test_timeout_dumps is failing in trunk https://hud.pytorch.org/pytorch/pytorch/commit/0e07e3dbe434ce31a5aea634628c7d39747f265f ([comment](https://github.com/pytorch/pytorch/pull/115176#issuecomment-1844076455))
