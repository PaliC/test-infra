# Week of 2023-11-20 to 2023-11-27 (16)

### GHFirst (9)

- [Revert "[pytree] register pytree node type in both C++ pytree and Python pytree (#112111)"](https://github.com/pytorch/pytorch/commit/01366efcc9d2e6f42d2783a8436a5357895140f4)
  - Break internal build ([comment](https://github.com/pytorch/pytorch/pull/112111#issuecomment-1824099658))
- [Revert "Add Stateful/Stateless symbolic contexts, use fresh fake mode for dynamo backends (#113926)"](https://github.com/pytorch/pytorch/commit/2f3beb715c608a060934c237de402faa40ea211f)
  - Break internal build ([comment](https://github.com/pytorch/pytorch/pull/113926#issuecomment-1822713852))
- [Revert "[dynamo / DDP] - lazily compile submodules - to propagate real tensor strides to backend compiler (#114154)"](https://github.com/pytorch/pytorch/commit/e239a2b2d7d1376e81fc22733d48f45f6855c14a)
  - The lower PR in the stack https://github.com/pytorch/pytorch/pull/113926 breaks the internal build ([comment](https://github.com/pytorch/pytorch/pull/114154#issuecomment-1822704476))
- [Revert "AOTAutograd: handle set_(), detect metadata mutations that cancel out (#111554)"](https://github.com/pytorch/pytorch/commit/3e1abde46d7904dea60cc4fe317730a0c47b6e9e)
  - The lower PR in the stack #113926 breaks the internal build ([comment](https://github.com/pytorch/pytorch/pull/111554#issuecomment-1822472206))
- [Revert "[dynamo] report guard failure user stack, fix incorrectly skipping interesting files (#114053)"](https://github.com/pytorch/pytorch/commit/8ec59d3553db4e3dae991db9aa3251558265dfd3)
  - Break internal build ([comment](https://github.com/pytorch/pytorch/pull/114053#issuecomment-1820584281))
- [Revert "Add function to materialize COW storages (#113396)"](https://github.com/pytorch/pytorch/commit/f36d09fcb7783c9c6f9e48be4075bbccbd68af05)
  - Break internal build ([comment](https://github.com/pytorch/pytorch/pull/113396#issuecomment-1818769090))
- [Revert "Add `torch._lazy_clone` to create COW tensors (#113397)"](https://github.com/pytorch/pytorch/commit/fe428a284bea6ca50069fd1a1a7b748dd00692e1)
  - Unfortunately, I need to revert your PR because the lower [PR in the stack](https://github.com/pytorch/pytorch/pull/113396) is failing a bunch of internal build jobs. ([comment](https://github.com/pytorch/pytorch/pull/113397#issuecomment-1818761224))
- [Revert "Skip test_lazy_clone for Inductor (#114012)"](https://github.com/pytorch/pytorch/commit/d40d72d664b8e8dace5f18265d631f3dadea74fb)
  - I revert the PR due to the original changes broke the internal build. Here is the original diff stack [D51444337](https://www.internalfb.com/diff/D51444337) ([comment](https://github.com/pytorch/pytorch/pull/114012#issuecomment-1818745425))
- [Revert "[Dynamo][Forward fix] Add torch.ao back to is_allowed list (#114016)"](https://github.com/pytorch/pytorch/commit/7d0339fb9a36753f78dff0d5101dd2022bcfca8b)
  - The PR was exported as part of the co-dev approach and needs to merged once the internal diff will landed. ([comment](https://github.com/pytorch/pytorch/pull/114016#issuecomment-1818591191))

### Landrace (1)

- [Revert "[inductor cpp] vectorize embedding lookup (#114062)"](https://github.com/pytorch/pytorch/commit/dd6ef0877ebe3d6b0645870b0a6517905469097e)
  - Sorry for reverting your change, please help fix lint and reland it https://hud.pytorch.org/pytorch/pytorch/commit/2c0474c02d3ac04a429504225d7f1a6536d3b9e6 ([comment](https://github.com/pytorch/pytorch/pull/114062#issuecomment-1820526515))

### No Signal (4)

- [Revert "deprecate PairwiseParallel from test (#114314)"](https://github.com/pytorch/pytorch/commit/272b40aee584bedde3c86f3c216f76ac2f8502c4)
  - Sorry for reverting your change, but this seems to fail periodic multigpu tests ([comment](https://github.com/pytorch/pytorch/pull/114314#issuecomment-1823727818))
- [Revert "Require less alignment for masking (#114173)"](https://github.com/pytorch/pytorch/commit/88a8a0daa4447e19e8355fa93ca9b3d8b3347ce8)
  - Sorry for reverting you change, but it is failing some inductor tests https://hud.pytorch.org/pytorch/pytorch/commit/f882c175d8e9731238c3f29ca10821f2fe9f0797 ([comment](https://github.com/pytorch/pytorch/pull/114173#issuecomment-1823552362))
- [Revert "Opportunistically use `ncclCommSplit` when creating new NCCL groups (#112889)"](https://github.com/pytorch/pytorch/commit/b927a4e2cad62317c8d0bdadf94a20da1d0825ef)
  - Sorry for reverting you change, but it is failing ROCm distributed jobs in trunk https://hud.pytorch.org/pytorch/pytorch/commit/4d07428edee863e7f5920f0672957a9711a9f0b5 ([comment](https://github.com/pytorch/pytorch/pull/112889#issuecomment-1823214376))
- [Revert "Print the index and summary of the SampleInput that failed an OpInfo test (#99444)"](https://github.com/pytorch/pytorch/commit/5f0d72124e28d1b2f16324ddb4ecf6c2463cb202)
  - Sorry for reverting your change but it seems to cause memory leak on CUDA job https://hud.pytorch.org/pytorch/pytorch/commit/e7f12b1eb0cedfd20dcb41ea35e21e9a71e3390a ([comment](https://github.com/pytorch/pytorch/pull/99444#issuecomment-1820491298))

### Weird (2)

- [Revert "Add support for models with mutated buffer on torch.onnx.dynamo_export (#112272)"](https://github.com/pytorch/pytorch/commit/a43edd836ca8c1d3b65ed0122439ef14193a8b20)
  - Sorry for reverting you change but it is failing dynamo test in trunk https://hud.pytorch.org/pytorch/pytorch/commit/c4a22d6918b7ca218f2712d7e7e147aca7127fa3 ([comment](https://github.com/pytorch/pytorch/pull/112272#issuecomment-1823897964))
- [Revert "[fx/DDP] add nested ctx_manager test for DDP Dynamo (#114056)"](https://github.com/pytorch/pytorch/commit/2c4930a91d8e4b8f7938f712bf3b78c1fdc2882f)
  - Breaks inductor_distributed, see https://hud.pytorch.org/pytorch/pytorch/commit/d5d62e85615fdf345e0556a9d8edbee2d3c64ae2 ([comment](https://github.com/pytorch/pytorch/pull/114056#issuecomment-1822006423))
